(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{185:function(t,n,e){"use strict";e(27);var r=e(186),o=function(t,n){console.log("回调结束")};n.a={EOS:function(t){var n=e(187),o=localStorage.getItem("knights-httpEndpoint");return null==o&&(o=r.a[0]),n({keyProvider:[t?t.keyProvider:""],httpEndpoint:o,chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906",mockTransactions:function(){return null},expireInSeconds:60,broadcast:!0,debug:!1,sign:!0,authorization:null})},tran_abi:function(t,n,e,r,o,i,a){t.transaction({actions:[{account:n,name:e,authorization:[{actor:r.name,permission:"active"}],data:o}]}).then(function(t){i(t)}).catch(function(t){a(t)})},tran:function(t,n,e,r,i,a,s){t.transfer({from:n,to:e,quantity:r,memo:i,callback:o}).then(function(t){a(t)}).catch(function(t){s(t)})}}},186:function(t,n,e){"use strict";n.a=["https://mainnet.meet.one","https://eos.greymass.com","https://mainnet.eoscannon.io","https://api.eosbeijing.one","https://api.eosnewyork.io","https://node1.zbeos.com"]},196:function(t,n,e){"use strict";e(89),e(38),e(39),e(22),e(40);var r=e(4),o=e.n(r),i=e(185),a=8,s=16,c=20,u={k:"sgxiangtk123",v:"14067806308472472624"},l={k:"dpkingtoken5",v:"5575713294574069328"},f={k:"itoken555555",v:"8532356795776715344"},p={k:"huanglili521",v:"7966082989382779920"},h={k:"sgxianggame1",v:"14067806308249408528"};function d(t){return g.apply(this,arguments)}function g(){return(g=o()(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,e){var r=i.a.EOS(),o={};o.account=n.k,r.getTableRows({json:!0,code:"eosknightsio",scope:"eosknightsio",table:"petexp",lower_bound:n.v,limit:1}).then(function(t){var e=t.rows[0].rows;o.pets=[],o.petsInfo=[];var i=!0,u=!1,l=void 0;try{for(var f,p=e[Symbol.iterator]();!(i=(f=p.next()).done);i=!0){var h=f.value,d=(parseInt("15"+h.start),1e3*parseInt("15"+h.end)),g=(new Date).getTime(),m=(d-g)/1e3/60/60,v=m<1?parseInt(60*m)+"分钟":parseInt(m)+"小时"+parseInt(60*(m-parseInt(m)))+"分钟";m<=0&&(v="0秒");var w=h.isback,x=w?"休息中":"远征中";h.code<=a?(o.pets.push("白色宠物 "+x+" 结束："+v),o.petsInfo.push({color:"白色",time:d-g,isback:w?"休息":"远征",code:h.code,difftext:v,detail:"白色宠物 "+x+" 结束："+v})):h.code<=s?(o.pets.push("黄色宠物 "+x+" 结束："+v),o.petsInfo.push({color:"黄色",time:d-g,isback:w?"休息":"远征",code:h.code,difftext:v,detail:"黄色宠物 "+x+" 结束："+v})):h.code<=c?(o.pets.push("绿色宠物 "+x+" 结束："+v),o.petsInfo.push({color:"绿色",time:d-g,isback:w?"休息":"远征",code:h.code,difftext:v,detail:"绿色宠物 "+x+" 结束："+v})):(o.pets.push("紫色宠物 "+x+" 结束："+v),o.petsInfo.push({color:"紫色",time:d-g,isback:w?"休息":"远征",code:h.code,difftext:v,detail:"紫色宠物 "+x+" 结束："+v}))}}catch(t){u=!0,l=t}finally{try{i||null==p.return||p.return()}finally{if(u)throw l}}var b=[],k=!0,y=!1,_=void 0;try{for(var I,R=o.petsInfo[Symbol.iterator]();!(k=(I=R.next()).done);k=!0){var S=I.value;"远征"==S.isback&&b.push(S)}}catch(t){y=!0,_=t}finally{try{k||null==R.return||R.return()}finally{if(y)throw _}}var F=!0,T=!1,C=void 0;try{for(var O,P=o.petsInfo[Symbol.iterator]();!(F=(O=P.next()).done);F=!0){var D=O.value;"远征"!=D.isback&&b.push(D)}}catch(t){T=!0,C=t}finally{try{F||null==P.return||P.return()}finally{if(T)throw C}}return o.petsInfo=b,r.getTableRows({json:!0,code:"eosknightsio",scope:"eosknightsio",table:"revenue",lower_bound:n.v,limit:1})}).then(function(t){var e=t.rows[0].selling,i=t.rows[0].spending,a=t.rows[0].buying,s=(.97*parseFloat(e)).toFixed(4)-parseFloat(i)-parseFloat(a);return o.money=s.toFixed(4)+" EOS",o.buy=(parseFloat(i)+parseFloat(a)).toFixed(4),o.sell=(.97*parseFloat(e)).toFixed(4),r.getTableRows({json:!0,code:"eosknightsio",scope:"eosknightsio",table:"knight",lower_bound:n.v,limit:1})}).then(function(t){var e,i,a=t.rows[0].rows,s=0,c=!0,u=!1,l=void 0;try{for(var f,p=a[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var h=f.value;s=Math.max(s,(i=void 0,i=25-25*(e=h).defense/(e.defense+1e3),60*e.hp/i))}}catch(t){u=!0,l=t}finally{try{c||null==p.return||p.return()}finally{if(u)throw l}}return o.spendtime=s,r.getTableRows({json:!0,code:"eosknightsio",scope:"eosknightsio",table:"player",lower_bound:n.v,limit:1})}).then(function(n){o.powder=n.rows[0].powder;var e=1e3*parseInt("15"+n.rows[0].last_rebirth),r=(new Date).getTime(),i=(r-e)/1e3,a=(1e3*o.spendtime-r+e)/1e3/60/60,s=a<1?parseInt(60*a)+"分钟":parseInt(a)+"小时"+parseInt(60*(a-parseInt(a)))+"分钟";o.rebirth=i,o.birth_time=parseInt(1e3*o.spendtime-r+e),o.rebirth>=o.spendtime?o.diff_text="可以复活了":o.diff_text=s+"后可复活",t(o)}).catch(function(t){e(t)})}));case 1:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function m(){return(m=o()(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n.split(","),console.log(r),t.prev=2,r=r.map(function(t){return{k:t,v:(n=t,""+e(187).modules.format.encodeName(n,!1))};var n}),t.next=10;break;case 6:return t.prev=6,t.t0=t.catch(2),localStorage.setItem("knights-accounts",""),t.abrupt("return",new Promise(function(n,e){e(t.t0)}));case 10:return t.abrupt("return",new Promise(function(t,n){v(r,0,[],function(n){t(n)},function(t){n(t)})}));case 11:case"end":return t.stop()}},t,this,[[2,6]])}))).apply(this,arguments)}function v(t,n,e,r,o){n>=t.length&&r(e),d(t[n]).then(function(i){e.push(i),v(t,n+1,e,r,o)}).catch(function(t){o(t)})}function w(){return(w=o()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){var e=[];d(u).then(function(t){return e.push(t),d(f)}).then(function(t){return e.push(t),d(h)}).then(function(t){return e.push(t),d(l)}).then(function(t){return e.push(t),d(p)}).then(function(n){e.push(n),t(e)}).catch(function(t){n(t)})}));case 1:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}n.a={get_my_knights:function(){return w.apply(this,arguments)},get_other_knights:function(t){return m.apply(this,arguments)}}},224:function(t,n,e){var r=e(382);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,e(42).default)("d4be674c",r,!0,{sourceMap:!1})},246:function(t,n){},247:function(t,n){},262:function(t,n){},381:function(t,n,e){"use strict";var r=e(224);e.n(r).a},382:function(t,n,e){(t.exports=e(41)(!1)).push([t.i,"\n.green{color:green\n}\n.fuchsia{color:#f0f\n}\n.red{color:#ff1493\n}\n.yellow{color:#da8300\n}\n.container,body{background-color:#f3f3f3\n}\n.container{min-height:100vh\n}\n.loading{width:100vw;height:100vh;text-align:center;line-height:100vh;font-size:18px\n}\n.all-money{width:100vw;height:44px;padding-left:20px;font-size:16px;background-color:#7fffd4;line-height:44px;font-weight:700\n}\n.refresh{position:fixed;right:20px;top:7px;height:30px;line-height:30px;width:120px;background-color:#000;text-align:center;color:#fff;border-radius:4px\n}\n.farm,.refresh{font-weight:700\n}\n.farm{font-size:16px;width:100vw;padding:10px 20px;background-color:#ffea70\n}\n.infos{margin-top:20px;margin-bottom:20px\n}\n.title{font-weight:700\n}\n.time,.title{margin-left:20px;height:30px;line-height:30px;font-size:16px\n}\n.time{color:#c42700\n}\n.powder{margin-left:20px;height:30px;line-height:30px\n}\n.info-wrap{background-color:#fff;border-radius:4px;padding:10px 20px;margin:0 20px\n}\n.pet{line-height:30px\n}",""])},383:function(t,n,e){"use strict";e.r(n);e(38),e(39),e(22),e(58);var r=e(196),o=e(59),i=e.n(o),a=(e(40),e(4)),s=e.n(a),c=e(185),u={k:"sgxiangtk123",v:""},l={k:"itoken555555",v:""};function f(t){return p.apply(this,arguments)}function p(){return(p=s()(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,e){var r=c.a.EOS(),o="";r.getTableRows({scope:n.k,code:"farmeosbank3",table:"mybonus",json:!0,limit:200}).then(function(e){var r=1e3*e.rows[e.rows.length-1].claim_time,i=(new Date).getTime();if(r+864e5<i)o=n.k+"可领取";else{var a=r+864e5-i;o=a<=0?n.k+"可领取farm分红":n.k+"等待"+(a/1e3/60).toFixed(0)+"分钟可领取farm分红"}t(o)}).catch(function(t){e(t)})}));case 1:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function h(){return(h=s()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){var e=[];f(u).then(function(t){return e.push(t),f(l)}).then(function(n){e.push(n),t(e)}).catch(function(t){n(t)})}));case 1:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}var d=function(){return h.apply(this,arguments)},g={data:function(){return{infos:[],error:null,loading:!1,allMoney:0,farm:[]}},components:{},mounted:function(){this.getData()},methods:{petHtml:function(t){var n=t;return-1!=n.indexOf("绿色宠物")?n=n.replace("绿色宠物","<span class='green'>绿色宠物</span>"):-1!=n.indexOf("紫色宠物")?n=n.replace("紫色宠物","<span class='fuchsia'>紫色宠物</span>"):-1!=n.indexOf("黄色宠物")&&(n=n.replace("黄色宠物","<span class='yellow'>黄色宠物</span>")),-1!=n.indexOf("远征中")&&(n=n.replace("远征中","<span class='red'>远征中</span>")),n},getData:function(){var t=this;if(!this.loading){this.loading=!0;var n=this;r.a.get_my_knights().then(function(n){t.infos=n,t.allMoney=0;var e=!0,r=!1,o=void 0;try{for(var i,a=t.infos[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var s=i.value;t.allMoney=t.allMoney+parseFloat(s.money)}}catch(t){r=!0,o=t}finally{try{e||null==a.return||a.return()}finally{if(r)throw o}}return d()}).then(function(e){t.loading=!1,t.farm=e,setTimeout(function(){n.getData()},3e5)}).catch(function(e){t.loading=!1,t.error=e,setTimeout(function(){n.getData()},3e5)})}},sendInfo:function(t){i.a.request("https://sc.ftqq.com/SCU6212Tc94a57258773b903c226dede26e6e4705a27b1ab1b762.send?text="+t)}}},m=(e(381),e(19)),v=Object(m.a)(g,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("section",{staticClass:"container"},[t.loading&&0==t.infos.length?e("p",{staticClass:"loading"},[t._v("加载中...")]):e("div",[e("p",{staticClass:"all-money"},[t._v("\n      盈亏："+t._s(t.allMoney.toFixed(4))+" EOS\n    ")]),t._v(" "),e("div",{staticClass:"refresh",on:{click:function(n){t.getData()}}},[t._v(t._s(t.loading?"刷新中...":"刷新"))]),t._v(" "),t._l(t.farm,function(n){return e("div",{key:n,staticClass:"farm"},[t._v("\n      "+t._s(n)+"\n    ")])}),t._v(" "),t._l(t.infos,function(n){return e("div",{key:n.account,staticClass:"infos"},[e("p",{staticClass:"title"},[t._v(t._s(n.account)),e("span",{staticClass:"time"},[t._v(t._s(n.diff_text))])]),t._v(" "),e("p",{staticClass:"powder"},[t._v(t._s(n.powder)+"水")]),t._v(" "),e("div",{staticClass:"info-wrap"},t._l(n.pets,function(r,o){return e("p",{key:r+n.account+o,staticClass:"pet",domProps:{innerHTML:t._s(t.petHtml(r))}})}))])})],2)])},[],!1,null,null,null);v.options.__file="index.vue";n.default=v.exports}}]);